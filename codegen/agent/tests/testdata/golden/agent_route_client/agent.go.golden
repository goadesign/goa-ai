// Code generated by goa vX, DO NOT EDIT.
//
// ScribeAgent implementation
//
// Command:

package scribe

import (
	"context"
	"errors"
	agent "goa.design/goa-ai/runtime/agent"
	"goa.design/goa-ai/runtime/agent/engine"
	"goa.design/goa-ai/runtime/agent/planner"
	runtime "goa.design/goa-ai/runtime/agent/runtime"
	"strings"
)

// AgentID is the fully-qualified identifier for this agent.
const AgentID agent.Ident = "calc.scribe"

// Workflow and activity identifiers for this agent.
const (
	// WorkflowName is the fully-qualified workflow identifier registered with the engine.
	WorkflowName = "calc.scribe.workflow"
	// DefaultTaskQueue is the engine queue this agent polls for workflow and activity tasks.
	DefaultTaskQueue = "calc_scribe_workflow"
	// PlanActivity is the activity name that runs the initial planning turn.
	PlanActivity = "calc.scribe.plan"
	// ResumeActivity is the activity name that runs the resume turn after tool execution.
	ResumeActivity = "calc.scribe.resume"
	// ExecuteToolActivity is the activity name used to execute tools via the engine.
	ExecuteToolActivity = "calc.scribe.executetool"
)

// ScribeAgent wraps the planner implementation for agent "scribe".
type ScribeAgent struct {
	Planner planner.Planner
}

// NewScribeAgent validates the configuration and constructs a ScribeAgent.
func NewScribeAgent(cfg ScribeAgentConfig) (*ScribeAgent, error) {
	if err := cfg.Validate(); err != nil {
		return nil, err
	}
	return &ScribeAgent{Planner: cfg.Planner}, nil
}

// NewWorker returns a per-agent worker configuration. Engines that support
// workers (e.g., Temporal) use this to bind the agent's workflow and activities
// to a specific queue. Supplying no options uses the generated default queue.
func NewWorker(opts ...runtime.WorkerOption) runtime.WorkerConfig {
	var cfg runtime.WorkerConfig
	for _, o := range opts {
		if o != nil {
			o(&cfg)
		}
	}
	return cfg
}

// Route returns the minimal route required to construct a client in a
// caller process without registering the agent locally.
func Route() runtime.AgentRoute {
	return runtime.AgentRoute{
		ID:               AgentID,
		WorkflowName:     WorkflowName,
		DefaultTaskQueue: "calc_scribe_workflow",
	}
}

// NewClient returns a runtime.AgentClient bound to this agent. In caller
// processes that do not register the agent locally, this uses ClientMeta to
// construct a client that can start workflows against remote workers.
func NewClient(rt *runtime.Runtime) runtime.AgentClient {
	return rt.MustClientFor(Route())
}
