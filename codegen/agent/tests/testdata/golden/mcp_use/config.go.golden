// Code generated by goa vX, DO NOT EDIT.
//
// ScribeAgent config
//
// Command:

package scribe

import (
	"errors"
	"fmt"
	"goa.design/goa-ai/runtime/agent/planner"
	mcpruntime "goa.design/goa-ai/runtime/mcp"
)

const (
	// ScribeCalcCoreToolsetID uniquely identifies the calc.core MCP toolset.
	ScribeCalcCoreToolsetID = "calc.core"
)

// ScribeAgentConfig configures the ScribeAgent agent package.
type ScribeAgentConfig struct {
	// Planner provides the concrete planner implementation used by the agent.
	Planner planner.Planner
	// MCPCallers maps MCP toolset IDs to the callers that invoke them. A caller must be
	// provided for every toolset referenced via UseMCPToolset.
	MCPCallers map[string]mcpruntime.Caller
}

// Validate ensures the configuration is usable.
func (c ScribeAgentConfig) Validate() error {
	if c.Planner == nil {
		return errors.New("planner is required")
	}
	required := []string{
		ScribeCalcCoreToolsetID,
	}
	for _, id := range required {
		if c.MCPCallers == nil || c.MCPCallers[id] == nil {
			return fmt.Errorf("mcp caller for %s is required", id)
		}
	}
	return nil
}

// WithMCPCaller adds or replaces the caller for the given MCP toolset ID and returns
// the config pointer for chaining in builder-style initialization.
func (c *ScribeAgentConfig) WithMCPCaller(id string, caller mcpruntime.Caller) *ScribeAgentConfig {
	if c.MCPCallers == nil {
		c.MCPCallers = make(map[string]mcpruntime.Caller)
	}
	c.MCPCallers[id] = caller
	return c
}
