// Code generated by goa vX, DO NOT EDIT.
//
// ScribeAgent tool codecs
//
// Command:

package helpers

import (
	"encoding/json"
	"errors"
	"fmt"
	"goa.design/goa-ai/runtime/agents/tools"
	"strings"
)

var (
	// SummarizeDocPayloadCodec serializes values of type *SummarizeDocPayload to canonical JSON.
	SummarizeDocPayloadCodec = tools.JSONCodec[*SummarizeDocPayload]{
		ToJSON:   MarshalSummarizeDocPayload,
		FromJSON: UnmarshalSummarizeDocPayload,
	}
	// SummarizeDocResultCodec serializes values of type *SummarizeDocResult to canonical JSON.
	SummarizeDocResultCodec = tools.JSONCodec[*SummarizeDocResult]{
		ToJSON:   MarshalSummarizeDocResult,
		FromJSON: UnmarshalSummarizeDocResult,
	}
	// summarizeDocPayloadCodec provides an untyped codec for *SummarizeDocPayload.
	summarizeDocPayloadCodec = tools.JSONCodec[any]{
		ToJSON: func(v any) ([]byte, error) {
			typed, ok := v.(*SummarizeDocPayload)
			if !ok {
				return nil, fmt.Errorf("expected *SummarizeDocPayload, got %T", v)
			}
			return MarshalSummarizeDocPayload(typed)
		},
		FromJSON: func(data []byte) (any, error) {
			return UnmarshalSummarizeDocPayload(data)
		},
	}
	// summarizeDocResultCodec provides an untyped codec for *SummarizeDocResult.
	summarizeDocResultCodec = tools.JSONCodec[any]{
		ToJSON: func(v any) ([]byte, error) {
			typed, ok := v.(*SummarizeDocResult)
			if !ok {
				return nil, fmt.Errorf("expected *SummarizeDocResult, got %T", v)
			}
			return MarshalSummarizeDocResult(typed)
		},
		FromJSON: func(data []byte) (any, error) {
			return UnmarshalSummarizeDocResult(data)
		},
	}
)

// ValidationError wraps a validation failure and exposes issues that callers
// can use to build retry hints. It implements error and an Issues() accessor.
type ValidationError struct {
	msg          string
	issues       []*tools.FieldIssue
	descriptions map[string]string
}

func (e ValidationError) Error() string {
	return e.msg
}
func (e ValidationError) Issues() []*tools.FieldIssue {
	if len(e.issues) == 0 {
		return nil
	}
	out := make([]*tools.FieldIssue, len(e.issues))
	copy(out, e.issues)
	return out
}
func (e ValidationError) Descriptions() map[string]string {
	if len(e.descriptions) == 0 {
		return nil
	}
	out := make(map[string]string, len(e.descriptions))
	for k, v := range e.descriptions {
		out[k] = v
	}
	return out
}

// newValidationError converts a goa.ServiceError (possibly merged) into a
// ValidationError with structured FieldIssue entries. It trims any leading
// "body." from field names for conciseness.

// PayloadCodec returns the generic codec for the named tool payload.
func PayloadCodec(name string) (*tools.JSONCodec[any], bool) {
	switch name {
	case "calc.helpers.summarize_doc":
		return &summarizeDocPayloadCodec, true
	default:
		return nil, false
	}
}

// ResultCodec returns the generic codec for the named tool result.
func ResultCodec(name string) (*tools.JSONCodec[any], bool) {
	switch name {
	case "calc.helpers.summarize_doc":
		return &summarizeDocResultCodec, true
	default:
		return nil, false
	}
}

// MarshalSummarizeDocPayload serializes *SummarizeDocPayload into JSON.
func MarshalSummarizeDocPayload(v *SummarizeDocPayload) ([]byte, error) {
	if v == nil {
		return nil, fmt.Errorf("summarizeDocPayload is nil")
	}
	return json.Marshal(v)
}

// UnmarshalSummarizeDocPayload deserializes JSON into *SummarizeDocPayload.
func UnmarshalSummarizeDocPayload(data []byte) (*SummarizeDocPayload, error) {
	if len(data) == 0 {
		return nil, fmt.Errorf("summarizeDocPayload JSON is empty")
	}
	var v SummarizeDocPayload
	if err := json.Unmarshal(data, &v); err != nil {
		return nil, fmt.Errorf("decode summarizeDocPayload: %w", err)
	}
	return &v, nil
}

// MarshalSummarizeDocResult serializes *SummarizeDocResult into JSON.
func MarshalSummarizeDocResult(v *SummarizeDocResult) ([]byte, error) {
	if v == nil {
		return nil, fmt.Errorf("summarizeDocResult is nil")
	}
	return json.Marshal(v)
}

// UnmarshalSummarizeDocResult deserializes JSON into *SummarizeDocResult.
func UnmarshalSummarizeDocResult(data []byte) (*SummarizeDocResult, error) {
	if len(data) == 0 {
		return nil, fmt.Errorf("summarizeDocResult JSON is empty")
	}
	var v SummarizeDocResult
	if err := json.Unmarshal(data, &v); err != nil {
		return nil, fmt.Errorf("decode summarizeDocResult: %w", err)
	}
	return &v, nil
}
