// Code generated by goa vX, DO NOT EDIT.
//
// ScribeAgent registry
//
// Command:
//
package scribe

import (
    "context"
    "errors"
    "fmt"
    "goa.design/goa-ai/runtime/agents/engine"
    agentsruntime "goa.design/goa-ai/runtime/agents/runtime"
    calc_core "goa.design/goa-ai/alpha/agents/scribe/calc_core"
    "time"
)

// RegisterScribeAgent registers the generated agent components with the runtime.
func RegisterScribeAgent(ctx context.Context, rt *agentsruntime.Runtime, cfg ScribeAgentConfig) error {
    if rt == nil {
        return errors.New("runtime is required")
    }
    agent, err := NewScribeAgent(cfg)
    if err != nil {
        return err
    }
    if err := rt.RegisterAgent(ctx, agentsruntime.AgentRegistration{
        ID:       "alpha.scribe",
        Planner:  agent.Planner,
        Workflow: ScribeWorkflowDefinition,
        Activities: []engine.ActivityDefinition{
            ScribePlanActivityDefinition,
            ScribeResumeActivityDefinition,
            ScribeExecuteToolActivityDefinition,
        },
        PlanActivityName: "alpha.scribe.plan",
        PlanActivityOptions: engine.ActivityOptions{
            Queue:   "alpha_scribe_workflow",
            Timeout: time.Duration(120000000000),
            RetryPolicy: engine.RetryPolicy{
                MaxAttempts:        3,
                InitialInterval:    time.Duration(1000000000),
                BackoffCoefficient: 2,
            },
        },
        ResumeActivityName: "alpha.scribe.resume",
        ResumeActivityOptions: engine.ActivityOptions{
            Queue:   "alpha_scribe_workflow",
            Timeout: time.Duration(120000000000),
            RetryPolicy: engine.RetryPolicy{
                MaxAttempts:        3,
                InitialInterval:    time.Duration(1000000000),
                BackoffCoefficient: 2,
            },
        },
        ExecuteToolActivity: "alpha.scribe.executetool",
        Specs:               nil,
        Policy:              agentsruntime.RunPolicy{},
    }); err != nil {
        return err
    }
    // Register external MCP toolsets using local executors and callers from config.
    if cfg.MCPCallers == nil {
        return fmt.Errorf("mcp callers are required for agent %s", "alpha.scribe")
    }
    {
        caller := cfg.MCPCallers[ScribeCalcCoreToolsetID]
        if caller == nil {
            return fmt.Errorf("mcp caller for %s is required", ScribeCalcCoreToolsetID)
        }
        exec := calc_core.NewScribeCalcCoreMCPExecutor(caller)
        if err := rt.RegisterToolset(calc_core.NewScribeCalcCoreToolsetRegistration(exec)); err != nil {
            return err
        }
    }

    return nil
}


