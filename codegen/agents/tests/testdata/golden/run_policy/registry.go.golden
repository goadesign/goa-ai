// Code generated by goa vX, DO NOT EDIT.
//
// ScribeAgent registry
//
// Command:

package scribe

import (
	"context"
	"errors"
	"goa.design/goa-ai/runtime/agents/engine"
	agentsruntime "goa.design/goa-ai/runtime/agents/runtime"
	specs "goa.design/goa-ai/alpha/agents/scribe/specs"
	"time"
)

// RegisterScribeAgent registers the generated agent components with the runtime.
func RegisterScribeAgent(ctx context.Context, rt *agentsruntime.Runtime, cfg ScribeAgentConfig) error {
	if rt == nil {
		return errors.New("runtime is required")
	}
	agent, err := NewScribeAgent(cfg)
	if err != nil {
		return err
	}
	if err := rt.RegisterAgent(ctx, agentsruntime.AgentRegistration{
		ID:       "alpha.scribe",
		Planner:  agent.Planner,
		Workflow: ScribeWorkflowDefinition,
		Activities: []engine.ActivityDefinition{
			ScribePlanActivityDefinition,
			ScribeResumeActivityDefinition,
			ScribeExecuteToolActivityDefinition,
		},
		PlanActivityName: "alpha.scribe.plan",
		PlanActivityOptions: engine.ActivityOptions{
			Queue:   "alpha_scribe_workflow",
			Timeout: time.Duration(120000000000),
			RetryPolicy: engine.RetryPolicy{
				MaxAttempts:        3,
				InitialInterval:    time.Duration(1000000000),
				BackoffCoefficient: 2,
			},
		},
		ResumeActivityName: "alpha.scribe.resume",
		ResumeActivityOptions: engine.ActivityOptions{
			Queue:   "alpha_scribe_workflow",
			Timeout: time.Duration(120000000000),
			RetryPolicy: engine.RetryPolicy{
				MaxAttempts:        3,
				InitialInterval:    time.Duration(1000000000),
				BackoffCoefficient: 2,
			},
		},
		ExecuteToolActivity: "alpha.scribe.executetool",
		Specs:               specs.Specs,
		Policy: agentsruntime.RunPolicy{
			MaxToolCalls:                  5,
			MaxConsecutiveFailedToolCalls: 2,
			TimeBudget:                    time.Duration(30000000000),
			InterruptsAllowed:             true,
		},
	}); err != nil {
		return err
	}

	// Service toolsets are registered by application code using executors.

	return nil
}
