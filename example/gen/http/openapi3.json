{"openapi":"3.0.3","info":{"title":"AI Assistant API","description":"Simple MCP example exposing tools, resources, prompts, and an agent consumer","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/orchestrator/agents/chat/run":{"post":{"tags":["orchestrator"],"summary":"run orchestrator","description":"Invoke the chat agent","operationId":"orchestrator#run","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRunPayload"},"example":{"agent_id":"orchestrator.chat","labels":{"tenant":"acme"},"messages":[{"content":"You are a concise assistant.","meta":{"message_id":"sys-1"},"role":"system"},{"content":"Summarize the latest status update.","meta":{"message_id":"user-1"},"role":"user"}],"metadata":{"priority":"p1"},"run_id":"run-abc","session_id":"session-123","turn_id":"turn-7"}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRunResult"},"example":{"agent_id":"orchestrator.chat","final":{"content":"All systems nominal. No outstanding action items.","role":"assistant"},"notes":[{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}],"run_id":"run-abc","tool_events":[{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}}]}}}}}}}},"components":{"schemas":{"AgentMessage":{"type":"object","properties":{"content":{"type":"string","description":"Message content","example":"Summarize today's incidents.","minLength":1},"meta":{"type":"object","description":"Optional structured metadata attached to the message","example":{"message_id":"user-1"},"additionalProperties":true},"role":{"type":"string","description":"Role that produced the message","example":"user","enum":["user","assistant","tool","system"]}},"description":"Single conversational message in the agent transcript.","example":{"content":"Summarize today's incidents.","meta":{"message_id":"user-1"},"role":"user"},"required":["role","content"]},"AgentPlannerAnnotation":{"type":"object","properties":{"labels":{"type":"object","description":"Structured metadata associated with the note","example":{"type":"reasoning"},"additionalProperties":{"type":"string","example":"Laboriosam quis est est sit qui."}},"text":{"type":"string","description":"Annotation emitted by the planner","example":"Calling search to gather the latest incidents.","minLength":1}},"description":"Planner observation persisted alongside run history.","example":{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}},"AgentRetryHint":{"type":"object","properties":{"clarifying_question":{"type":"string","description":"Question that callers should answer to proceed","example":"Which incident should I summarize?"},"example_input":{"type":"object","description":"Representative payload that satisfies validation","example":{"query":"latest status"},"additionalProperties":true},"message":{"type":"string","description":"Human-readable guidance for logs or UI","example":"Tool returned 400: invalid request payload"},"missing_fields":{"type":"array","items":{"type":"string","example":"Minus ut esse veniam omnis."},"description":"Missing or invalid fields that caused the failure","example":["query","filters"]},"prior_input":{"type":"object","description":"Payload that triggered the failure","example":{"query":""},"additionalProperties":true},"reason":{"type":"string","description":"Categorized reason for the retry guidance","example":"invalid_arguments","enum":["invalid_arguments","missing_fields","malformed_response","timeout","rate_limited","tool_unavailable"]},"restrict_to_tool":{"type":"boolean","description":"Restrict subsequent planner turns to this tool","example":false},"tool":{"type":"string","description":"Qualified tool name associated with the hint","example":"assistant.search","minLength":1}},"description":"Structured guidance emitted after a tool failure.","example":{"clarifying_question":"Which incident should I summarize?","example_input":{"query":"latest status"},"message":"Tool returned 400: invalid request payload","missing_fields":["query","filters"],"prior_input":{"query":""},"reason":"invalid_arguments","restrict_to_tool":false,"tool":"assistant.search"},"required":["reason","tool"]},"AgentRunChunk":{"type":"object","properties":{"message":{"type":"string","description":"Assistant message fragment.","example":"Processing request..."},"status":{"$ref":"#/components/schemas/AgentRunStatusChunk"},"tool_call":{"$ref":"#/components/schemas/AgentToolCallChunk"},"tool_result":{"$ref":"#/components/schemas/AgentToolResultChunk"},"type":{"type":"string","description":"Kind of chunk being delivered","example":"message","enum":["message","tool_call","tool_result","status"]}},"description":"Streaming chunk emitted while an agent run progresses.","example":{"message":"Processing request...","status":{"message":"Awaiting human approval","state":"started"},"tool_call":{"id":"call-001","name":"assistant.search","payload":"Voluptates adipisci dignissimos ipsa minus consectetur deserunt."},"tool_result":{"error":{"message":"timeout contacting upstream search API"},"id":"call-001","result":"Odio et."},"type":"message"},"required":["type"]},"AgentRunPayload":{"type":"object","properties":{"agent_id":{"type":"string","description":"Agent identifier to invoke (optional when bound to a single agent)","example":"orchestrator.chat"},"labels":{"type":"object","description":"Caller-supplied labels forwarded to the runtime","example":{"tenant":"acme"},"additionalProperties":{"type":"string","example":"Non nobis consectetur."}},"messages":{"type":"array","items":{"$ref":"#/components/schemas/AgentMessage"},"description":"Complete conversation history supplied to the agent","example":[{"content":"You are a concise assistant.","meta":{"message_id":"sys-1"},"role":"system"},{"content":"Summarize the latest status update.","meta":{"message_id":"user-1"},"role":"user"}],"minItems":1},"metadata":{"type":"object","description":"Arbitrary metadata forwarded to the runtime","example":{"priority":"p1"},"additionalProperties":true},"run_id":{"type":"string","description":"Caller-provided run identifier","example":"run-abc","minLength":1},"session_id":{"type":"string","description":"Session identifier used for grouping runs","example":"session-123","minLength":1},"turn_id":{"type":"string","description":"Turn identifier associated with the run","example":"turn-7"}},"description":"Payload submitted to agent Run endpoints.","example":{"agent_id":"orchestrator.chat","labels":{"tenant":"acme"},"messages":[{"content":"You are a concise assistant.","meta":{"message_id":"sys-1"},"role":"system"},{"content":"Summarize the latest status update.","meta":{"message_id":"user-1"},"role":"user"}],"metadata":{"priority":"p1"},"run_id":"run-abc","session_id":"session-123","turn_id":"turn-7"},"required":["messages"]},"AgentRunResult":{"type":"object","properties":{"agent_id":{"type":"string","description":"Identifier of the agent that produced the result","example":"orchestrator.chat","minLength":1},"final":{"$ref":"#/components/schemas/AgentMessage"},"notes":{"type":"array","items":{"$ref":"#/components/schemas/AgentPlannerAnnotation"},"description":"Planner annotations captured during completion","example":[{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}]},"run_id":{"type":"string","description":"Identifier of the completed run","example":"run-abc","minLength":1},"tool_events":{"type":"array","items":{"$ref":"#/components/schemas/AgentToolEvent"},"description":"Tool events emitted during the final turn","example":[{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}}]}},"description":"Terminal output produced by agent Run endpoints.","example":{"agent_id":"orchestrator.chat","final":{"content":"All systems nominal. No outstanding action items.","role":"assistant"},"notes":[{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}],"run_id":"run-abc","tool_events":[{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}}]},"required":["agent_id","run_id","final"]},"AgentRunStatusChunk":{"type":"object","properties":{"message":{"type":"string","description":"Optional status annotation","example":"Awaiting human approval"},"state":{"type":"string","description":"Current run state","example":"started","enum":["started","paused","resumed","completed"]}},"description":"Run status change emitted during streaming.","example":{"message":"Awaiting human approval","state":"started"},"required":["state"]},"AgentToolCallChunk":{"type":"object","properties":{"id":{"type":"string","description":"Tool call identifier","example":"call-001","minLength":1},"name":{"type":"string","description":"Tool name","example":"assistant.search","minLength":1},"payload":{"description":"Payload submitted to the tool","example":"Recusandae voluptates."}},"description":"Chunk describing a scheduled tool call.","example":{"id":"call-001","name":"assistant.search","payload":"Rerum deleniti ea facilis esse in laboriosam."},"required":["id","name"]},"AgentToolError":{"type":"object","properties":{"cause":{"$ref":"#/components/schemas/AgentToolError"},"message":{"type":"string","description":"Human-readable error summary","example":"timeout contacting upstream search API"}},"description":"Structured tool error chain captured during execution.","example":{"cause":{"message":"timeout contacting upstream search API"},"message":"timeout contacting upstream search API"}},"AgentToolEvent":{"type":"object","properties":{"error":{"$ref":"#/components/schemas/AgentToolError"},"name":{"type":"string","description":"Tool identifier","example":"assistant.search","minLength":1},"payload":{"description":"Tool result payload when the call succeeds","example":{"documents":["alpha.md","beta.md"]}},"retry_hint":{"$ref":"#/components/schemas/AgentRetryHint"},"telemetry":{"$ref":"#/components/schemas/AgentToolTelemetry"}},"description":"Outcome of an executed tool call.","example":{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},"required":["name"]},"AgentToolResultChunk":{"type":"object","properties":{"error":{"$ref":"#/components/schemas/AgentToolError"},"id":{"type":"string","description":"Tool call identifier","example":"call-001","minLength":1},"result":{"description":"Decoded tool result payload","example":"Aut quis corporis qui quod."}},"description":"Chunk containing the result of a tool call.","example":{"error":{"message":"timeout contacting upstream search API"},"id":"call-001","result":"Eum reiciendis."},"required":["id"]},"AgentToolTelemetry":{"type":"object","properties":{"duration_ms":{"type":"integer","description":"Wall-clock duration in milliseconds","example":1250,"format":"int64","minimum":0},"extra":{"type":"object","description":"Tool-specific telemetry key/value pairs","example":{"trace_id":"abc-123"},"additionalProperties":true},"model":{"type":"string","description":"Identifier of the model used by the tool","example":"claude-3-opus"},"tokens_used":{"type":"integer","description":"Total tokens consumed by the tool call","example":512,"format":"int64","minimum":0}},"description":"Telemetry metadata gathered during tool execution.","example":{"duration_ms":1250,"extra":{"trace_id":"abc-123"},"model":"claude-3-opus","tokens_used":512}},"BatchResult":{"type":"object","properties":{"failed":{"type":"integer","description":"Number of items failed","example":0,"format":"int64","minimum":0},"processed":{"type":"integer","description":"Number of items processed","example":2,"format":"int64","minimum":0},"results":{"type":"array","items":{"example":"Quod aperiam qui voluptates aliquam laboriosam sit."},"description":"Processing results","example":["Repudiandae ea minus est incidunt inventore dolor.","Facilis quae sed expedita.","Ut quod error perspiciatis voluptatibus sunt quia.","Laudantium odit quibusdam aliquid at sit."]}},"example":{"failed":0,"processed":2,"results":["Beatae et cum et maiores nostrum rem.","Possimus est.","Consequatur ab.","Reprehenderit labore."]},"required":["processed","failed","results"]},"ConversationHistory":{"type":"object","properties":{"messages":{"type":"array","items":{"example":"Aspernatur ullam at et."},"description":"Conversation messages","example":["Odio natus.","Assumenda dolores placeat ea.","Reiciendis rerum delectus qui cum."]}},"example":{"messages":["Aut adipisci voluptatem modi.","Et sit eos architecto illo porro inventore.","Qui dolorem occaecati tenetur est neque praesentium."]}},"Document":{"type":"object","properties":{"id":{"type":"string","description":"Document ID","example":"doc-1"},"modified":{"type":"string","description":"Last modified","example":"2025-01-01T12:00:00Z","format":"date-time"},"name":{"type":"string","description":"Document name","example":"README.md"},"size":{"type":"integer","description":"Size in bytes","example":2048,"format":"int64","minimum":0},"type":{"type":"string","description":"Document type","example":"markdown","enum":["text","pdf","image","markdown"]}},"example":{"id":"doc-1","modified":"2025-01-01T12:00:00Z","name":"README.md","size":2048,"type":"markdown"},"required":["id","name","type","size","modified"]},"Documents":{"type":"array","items":{"$ref":"#/components/schemas/Document"},"example":[{"id":"doc-1","modified":"2025-01-01T12:00:00Z","name":"README.md","size":2048,"type":"markdown"},{"id":"doc-1","modified":"2025-01-01T12:00:00Z","name":"README.md","size":2048,"type":"markdown"}]},"ExecutionResult":{"type":"object","properties":{"error":{"type":"string","description":"Error message if any","example":""},"execution_time":{"type":"number","description":"Execution time in seconds","example":0.01,"format":"double","minimum":0},"output":{"type":"string","description":"Execution output","example":"4"}},"example":{"error":"","execution_time":0.01,"output":"4"},"required":["output","execution_time"]},"KeywordsResult":{"type":"object","properties":{"keywords":{"type":"array","items":{"type":"string","example":"Voluptatibus iusto minima."},"description":"Extracted keywords","example":["algorithms","patterns"]}},"example":{"keywords":["algorithms","patterns"]},"required":["keywords"]},"PromptTemplate":{"type":"object","properties":{"description":{"type":"string","description":"Template description","example":"Template for code review"},"name":{"type":"string","description":"Template name","example":"code_review"},"template":{"type":"string","description":"Template content","example":"You are an expert code reviewer. {{.code}}","minLength":1},"variables":{"type":"array","items":{"type":"string","example":"Consequatur debitis quis."},"description":"Required variables","example":["code"]}},"example":{"description":"Template for code review","name":"code_review","template":"You are an expert code reviewer. {{.code}}","variables":["code"]},"required":["name","description","template"]},"PromptTemplates":{"type":"array","items":{"$ref":"#/components/schemas/PromptTemplate"},"example":[{"description":"Template for code review","name":"code_review","template":"You are an expert code reviewer. {{.code}}","variables":["code"]},{"description":"Template for code review","name":"code_review","template":"You are an expert code reviewer. {{.code}}","variables":["code"]},{"description":"Template for code review","name":"code_review","template":"You are an expert code reviewer. {{.code}}","variables":["code"]}]},"RunPayload":{"type":"object","properties":{"prompt":{"type":"string","description":"User prompt to execute","example":"Summarize the latest status update."},"run_id":{"type":"string","description":"Optional run identifier","example":"run-123"},"session_id":{"type":"string","description":"Session identifier","example":"session-123"}},"example":{"prompt":"Summarize the latest status update.","run_id":"run-123","session_id":"session-123"},"required":["prompt"]},"RunResult":{"type":"object","properties":{"content":{"type":"string","description":"Final assistant reply","example":"All systems nominal."},"run_id":{"type":"string","description":"Unique run identifier","example":"run-123"}},"example":{"content":"All systems nominal.","run_id":"run-123"},"required":["run_id","content"]},"SearchResult":{"type":"object","properties":{"content":{"type":"string","description":"Result content","example":"The Model Context Protocol (MCP) defines...","maxLength":10000},"id":{"type":"string","description":"Result ID","example":"doc-1"},"score":{"type":"number","description":"Relevance score (0–1)","example":0.87,"format":"double","minimum":0,"maximum":1},"title":{"type":"string","description":"Result title","example":"MCP Specification Overview"}},"example":{"content":"The Model Context Protocol (MCP) defines...","id":"doc-1","score":0.87,"title":"MCP Specification Overview"},"required":["id","title","content","score"]},"SearchResults":{"type":"array","items":{"$ref":"#/components/schemas/SearchResult"},"example":[{"content":"The Model Context Protocol (MCP) defines...","id":"doc-1","score":0.87,"title":"MCP Specification Overview"},{"content":"The Model Context Protocol (MCP) defines...","id":"doc-1","score":0.87,"title":"MCP Specification Overview"},{"content":"The Model Context Protocol (MCP) defines...","id":"doc-1","score":0.87,"title":"MCP Specification Overview"},{"content":"The Model Context Protocol (MCP) defines...","id":"doc-1","score":0.87,"title":"MCP Specification Overview"}]},"SentimentResult":{"type":"object","properties":{"confidence":{"type":"number","description":"Confidence score (0–1)","example":0.98,"format":"double","minimum":0,"maximum":1},"label":{"type":"string","description":"Sentiment label","example":"positive","enum":["positive","neutral","negative"]}},"example":{"confidence":0.98,"label":"positive"},"required":["label"]},"SubscriptionInfo":{"type":"object","properties":{"created_at":{"type":"string","description":"Subscription created","example":"2025-01-01T12:00:00Z","format":"date-time"},"resource":{"type":"string","description":"Subscribed resource","example":"documents"},"subscription_id":{"type":"string","description":"Subscription ID","example":"550e8400-e29b-41d4-a716-446655440000","format":"uuid"}},"example":{"created_at":"2025-01-01T12:00:00Z","resource":"documents","subscription_id":"550e8400-e29b-41d4-a716-446655440000"},"required":["subscription_id","resource","created_at"]},"SummaryResult":{"type":"object","properties":{"summary":{"type":"string","description":"Summary text","example":"Concise summary.","minLength":1}},"example":{"summary":"Concise summary."},"required":["summary"]},"SystemInfo":{"type":"object","properties":{"active_connections":{"type":"integer","description":"Number of active connections","example":3,"format":"int64","minimum":0},"cpu_usage":{"type":"number","description":"CPU usage percentage","example":17.3,"format":"double","minimum":0,"maximum":100},"memory_usage":{"type":"number","description":"Memory usage percentage","example":42.5,"format":"double","minimum":0,"maximum":100},"uptime":{"type":"integer","description":"Uptime in seconds","example":12345,"format":"int64","minimum":0},"version":{"type":"string","description":"System version","example":"1.0.0"}},"example":{"active_connections":3,"cpu_usage":17.3,"memory_usage":42.5,"uptime":12345,"version":"1.0.0"},"required":["version","uptime","memory_usage","cpu_usage","active_connections"]}}},"tags":[{"name":"orchestrator","description":"Agent service consuming the assistant MCP toolset"}]}