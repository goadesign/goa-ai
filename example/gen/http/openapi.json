{"swagger":"2.0","info":{"title":"AI Assistant API","description":"Simple MCP example exposing tools, resources, prompts, and an agent consumer","version":"1.0"},"host":"localhost:8080","consumes":["application/json","application/xml","application/gob"],"produces":["application/json","application/xml","application/gob"],"paths":{"/orchestrator/agents/chat/run":{"post":{"tags":["orchestrator"],"summary":"run orchestrator","description":"Invoke the chat agent","operationId":"orchestrator#run","parameters":[{"name":"RunRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/AgentRunPayload","required":["messages"]}}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/AgentRunResult","required":["agent_id","run_id","final"]}}},"schemes":["http"]}}},"definitions":{"AgentMessage":{"title":"AgentMessage","type":"object","properties":{"content":{"type":"string","description":"Message content","example":"Summarize today's incidents.","minLength":1},"meta":{"type":"object","description":"Optional structured metadata attached to the message","example":{"message_id":"user-1"},"additionalProperties":true},"role":{"type":"string","description":"Role that produced the message","example":"user","enum":["user","assistant","tool","system"]}},"description":"Single conversational message in the agent transcript.","example":{"content":"Summarize today's incidents.","meta":{"message_id":"user-1"},"role":"user"},"required":["role","content"]},"AgentPlannerAnnotation":{"title":"AgentPlannerAnnotation","type":"object","properties":{"labels":{"type":"object","description":"Structured metadata associated with the note","example":{"type":"reasoning"},"additionalProperties":{"type":"string","example":"Molestiae at iste aliquid."}},"text":{"type":"string","description":"Annotation emitted by the planner","example":"Calling search to gather the latest incidents.","minLength":1}},"description":"Planner observation persisted alongside run history.","example":{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}},"AgentRetryHint":{"title":"AgentRetryHint","type":"object","properties":{"clarifying_question":{"type":"string","description":"Question that callers should answer to proceed","example":"Which incident should I summarize?"},"example_input":{"type":"object","description":"Representative payload that satisfies validation","example":{"query":"latest status"},"additionalProperties":true},"message":{"type":"string","description":"Human-readable guidance for logs or UI","example":"Tool returned 400: invalid request payload"},"missing_fields":{"type":"array","items":{"type":"string","example":"Amet similique."},"description":"Missing or invalid fields that caused the failure","example":["query","filters"]},"prior_input":{"type":"object","description":"Payload that triggered the failure","example":{"query":""},"additionalProperties":true},"reason":{"type":"string","description":"Categorized reason for the retry guidance","example":"invalid_arguments","enum":["invalid_arguments","missing_fields","malformed_response","timeout","rate_limited","tool_unavailable"]},"restrict_to_tool":{"type":"boolean","description":"Restrict subsequent planner turns to this tool","example":false},"tool":{"type":"string","description":"Qualified tool name associated with the hint","example":"assistant.search","minLength":1}},"description":"Structured guidance emitted after a tool failure.","example":{"clarifying_question":"Which incident should I summarize?","example_input":{"query":"latest status"},"message":"Tool returned 400: invalid request payload","missing_fields":["query","filters"],"prior_input":{"query":""},"reason":"invalid_arguments","restrict_to_tool":false,"tool":"assistant.search"},"required":["reason","tool"]},"AgentRunPayload":{"title":"AgentRunPayload","type":"object","properties":{"agent_id":{"type":"string","description":"Agent identifier to invoke (optional when bound to a single agent)","example":"orchestrator.chat"},"labels":{"type":"object","description":"Caller-supplied labels forwarded to the runtime","example":{"tenant":"acme"},"additionalProperties":{"type":"string","example":"Hic dolor blanditiis alias voluptatem ad."}},"messages":{"type":"array","items":{"$ref":"#/definitions/AgentMessage"},"description":"Complete conversation history supplied to the agent","example":[{"content":"You are a concise assistant.","meta":{"message_id":"sys-1"},"role":"system"},{"content":"Summarize the latest status update.","meta":{"message_id":"user-1"},"role":"user"}],"minItems":1},"metadata":{"type":"object","description":"Arbitrary metadata forwarded to the runtime","example":{"priority":"p1"},"additionalProperties":true},"run_id":{"type":"string","description":"Caller-provided run identifier","example":"run-abc","minLength":1},"session_id":{"type":"string","description":"Session identifier used for grouping runs","example":"session-123","minLength":1},"turn_id":{"type":"string","description":"Turn identifier associated with the run","example":"turn-7"}},"example":{"agent_id":"orchestrator.chat","labels":{"tenant":"acme"},"messages":[{"content":"You are a concise assistant.","meta":{"message_id":"sys-1"},"role":"system"},{"content":"Summarize the latest status update.","meta":{"message_id":"user-1"},"role":"user"}],"metadata":{"priority":"p1"},"run_id":"run-abc","session_id":"session-123","turn_id":"turn-7"},"required":["messages"]},"AgentRunResult":{"title":"AgentRunResult","type":"object","properties":{"agent_id":{"type":"string","description":"Identifier of the agent that produced the result","example":"orchestrator.chat","minLength":1},"final":{"$ref":"#/definitions/AgentMessage"},"notes":{"type":"array","items":{"$ref":"#/definitions/AgentPlannerAnnotation"},"description":"Planner annotations captured during completion","example":[{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}]},"run_id":{"type":"string","description":"Identifier of the completed run","example":"run-abc","minLength":1},"tool_events":{"type":"array","items":{"$ref":"#/definitions/AgentToolEvent"},"description":"Tool events emitted during the final turn","example":[{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}}]}},"example":{"agent_id":"orchestrator.chat","final":{"content":"All systems nominal. No outstanding action items.","role":"assistant"},"notes":[{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."},{"labels":{"type":"reasoning"},"text":"Calling search to gather the latest incidents."}],"run_id":"run-abc","tool_events":[{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}}]},"required":["agent_id","run_id","final"]},"AgentToolError":{"title":"AgentToolError","type":"object","properties":{"cause":{"$ref":"#/definitions/AgentToolError"},"message":{"type":"string","description":"Human-readable error summary","example":"timeout contacting upstream search API"}},"description":"Structured tool error chain captured during execution.","example":{"cause":{"message":"timeout contacting upstream search API"},"message":"timeout contacting upstream search API"}},"AgentToolEvent":{"title":"AgentToolEvent","type":"object","properties":{"error":{"$ref":"#/definitions/AgentToolError"},"name":{"type":"string","description":"Tool identifier","example":"assistant.search","minLength":1},"payload":{"description":"Tool result payload when the call succeeds","example":{"documents":["alpha.md","beta.md"]}},"retry_hint":{"$ref":"#/definitions/AgentRetryHint"},"telemetry":{"$ref":"#/definitions/AgentToolTelemetry"}},"description":"Outcome of an executed tool call.","example":{"error":{"message":"invalid filter value"},"name":"assistant.search","retry_hint":{"message":"Ensure the filter is a recognized status value.","reason":"invalid_arguments","tool":"assistant.search"}},"required":["name"]},"AgentToolTelemetry":{"title":"AgentToolTelemetry","type":"object","properties":{"duration_ms":{"type":"integer","description":"Wall-clock duration in milliseconds","example":1250,"format":"int64","minimum":0},"extra":{"type":"object","description":"Tool-specific telemetry key/value pairs","example":{"trace_id":"abc-123"},"additionalProperties":true},"model":{"type":"string","description":"Identifier of the model used by the tool","example":"claude-3-opus"},"tokens_used":{"type":"integer","description":"Total tokens consumed by the tool call","example":512,"format":"int64","minimum":0}},"description":"Telemetry metadata gathered during tool execution.","example":{"duration_ms":1250,"extra":{"trace_id":"abc-123"},"model":"claude-3-opus","tokens_used":512}}}}