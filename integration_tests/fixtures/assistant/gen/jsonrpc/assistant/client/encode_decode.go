// Code generated by goa v3.23.0, DO NOT EDIT.
//
// assistant JSON-RPC client encoders and decoders
//
// Command:
// $ goa gen example.com/assistant/design

package client

import (
	"bytes"
	"context"
	"io"
	"net/http"
	"net/url"

	assistant "example.com/assistant/gen/assistant"
	"github.com/google/uuid"
	goahttp "goa.design/goa/v3/http"
	"goa.design/goa/v3/jsonrpc"
)

// BuildListDocumentsRequest instantiates a HTTP request object with method and
// path set to call the "assistant" service "list_documents" endpoint
func (c *Client) BuildListDocumentsRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ListDocumentsAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "list_documents", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// DecodeListDocumentsResponse returns a decoder for responses returned by the
// assistant service list_documents JSON-RPC method. restoreBody controls
// whether the response body should be restored after having been read.
func DecodeListDocumentsResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "list_documents", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "list_documents", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "list_documents", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body ListDocumentsResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "list_documents", err)
		}
		err = ValidateListDocumentsResponseBody(&body)
		if err != nil {
			return nil, goahttp.ErrValidationError("assistant", "list_documents", err)
		}
		res := NewListDocumentsDocumentsOK(&body)
		return res, nil
	}
}

// BuildSystemInfoRequest instantiates a HTTP request object with method and
// path set to call the "assistant" service "system_info" endpoint
func (c *Client) BuildSystemInfoRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: SystemInfoAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "system_info", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// DecodeSystemInfoResponse returns a decoder for responses returned by the
// assistant service system_info JSON-RPC method. restoreBody controls whether
// the response body should be restored after having been read.
func DecodeSystemInfoResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "system_info", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "system_info", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "system_info", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body SystemInfoResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "system_info", err)
		}
		res := NewSystemInfoResultOK(&body)
		return res, nil
	}
}

// BuildConversationHistoryRequest instantiates a HTTP request object with
// method and path set to call the "assistant" service "conversation_history"
// endpoint
func (c *Client) BuildConversationHistoryRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ConversationHistoryAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "conversation_history", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeConversationHistoryRequest returns an encoder for requests sent to the
// assistant conversation_history server.
func EncodeConversationHistoryRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.ConversationHistoryPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "conversation_history", "*assistant.ConversationHistoryPayload", v)
		}
		b := NewConversationHistoryRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "conversation_history",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "conversation_history", err)
		}
		return nil
	}
}

// DecodeConversationHistoryResponse returns a decoder for responses returned
// by the assistant service conversation_history JSON-RPC method. restoreBody
// controls whether the response body should be restored after having been read.
func DecodeConversationHistoryResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "conversation_history", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "conversation_history", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "conversation_history", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body ConversationHistoryResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "conversation_history", err)
		}
		res := NewConversationHistoryResultOK(&body)
		return res, nil
	}
}

// BuildGeneratePromptsRequest instantiates a HTTP request object with method
// and path set to call the "assistant" service "generate_prompts" endpoint
func (c *Client) BuildGeneratePromptsRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: GeneratePromptsAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "generate_prompts", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeGeneratePromptsRequest returns an encoder for requests sent to the
// assistant generate_prompts server.
func EncodeGeneratePromptsRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.GeneratePromptsPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "generate_prompts", "*assistant.GeneratePromptsPayload", v)
		}
		b := NewGeneratePromptsRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "generate_prompts",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "generate_prompts", err)
		}
		return nil
	}
}

// DecodeGeneratePromptsResponse returns a decoder for responses returned by
// the assistant service generate_prompts JSON-RPC method. restoreBody controls
// whether the response body should be restored after having been read.
func DecodeGeneratePromptsResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "generate_prompts", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "generate_prompts", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "generate_prompts", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body GeneratePromptsResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "generate_prompts", err)
		}
		err = ValidateGeneratePromptsResponseBody(&body)
		if err != nil {
			return nil, goahttp.ErrValidationError("assistant", "generate_prompts", err)
		}
		res := NewGeneratePromptsPromptTemplatesOK(&body)
		return res, nil
	}
}

// BuildSendNotificationRequest instantiates a HTTP request object with method
// and path set to call the "assistant" service "send_notification" endpoint
func (c *Client) BuildSendNotificationRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: SendNotificationAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "send_notification", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeSendNotificationRequest returns an encoder for requests sent to the
// assistant send_notification server.
func EncodeSendNotificationRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.SendNotificationPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "send_notification", "*assistant.SendNotificationPayload", v)
		}
		b := NewSendNotificationRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "send_notification",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "send_notification", err)
		}
		return nil
	}
}

// DecodeSendNotificationResponse returns a decoder for responses returned by
// the assistant service send_notification JSON-RPC method. restoreBody
// controls whether the response body should be restored after having been read.
func DecodeSendNotificationResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "send_notification", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "send_notification", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "send_notification", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		return nil, nil
	}
}

// BuildAnalyzeSentimentRequest instantiates a HTTP request object with method
// and path set to call the "assistant" service "analyze_sentiment" endpoint
func (c *Client) BuildAnalyzeSentimentRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: AnalyzeSentimentAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "analyze_sentiment", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeAnalyzeSentimentRequest returns an encoder for requests sent to the
// assistant analyze_sentiment server.
func EncodeAnalyzeSentimentRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.AnalyzeSentimentPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "analyze_sentiment", "*assistant.AnalyzeSentimentPayload", v)
		}
		b := NewAnalyzeSentimentRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "analyze_sentiment",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "analyze_sentiment", err)
		}
		return nil
	}
}

// DecodeAnalyzeSentimentResponse returns a decoder for responses returned by
// the assistant service analyze_sentiment JSON-RPC method. restoreBody
// controls whether the response body should be restored after having been read.
func DecodeAnalyzeSentimentResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "analyze_sentiment", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "analyze_sentiment", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "analyze_sentiment", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body AnalyzeSentimentResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "analyze_sentiment", err)
		}
		res := NewAnalyzeSentimentResultOK(&body)
		return res, nil
	}
}

// BuildExtractKeywordsRequest instantiates a HTTP request object with method
// and path set to call the "assistant" service "extract_keywords" endpoint
func (c *Client) BuildExtractKeywordsRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ExtractKeywordsAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "extract_keywords", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeExtractKeywordsRequest returns an encoder for requests sent to the
// assistant extract_keywords server.
func EncodeExtractKeywordsRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.ExtractKeywordsPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "extract_keywords", "*assistant.ExtractKeywordsPayload", v)
		}
		b := NewExtractKeywordsRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "extract_keywords",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "extract_keywords", err)
		}
		return nil
	}
}

// DecodeExtractKeywordsResponse returns a decoder for responses returned by
// the assistant service extract_keywords JSON-RPC method. restoreBody controls
// whether the response body should be restored after having been read.
func DecodeExtractKeywordsResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "extract_keywords", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "extract_keywords", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "extract_keywords", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body ExtractKeywordsResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "extract_keywords", err)
		}
		res := NewExtractKeywordsResultOK(&body)
		return res, nil
	}
}

// BuildSummarizeTextRequest instantiates a HTTP request object with method and
// path set to call the "assistant" service "summarize_text" endpoint
func (c *Client) BuildSummarizeTextRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: SummarizeTextAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "summarize_text", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeSummarizeTextRequest returns an encoder for requests sent to the
// assistant summarize_text server.
func EncodeSummarizeTextRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.SummarizeTextPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "summarize_text", "*assistant.SummarizeTextPayload", v)
		}
		b := NewSummarizeTextRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "summarize_text",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "summarize_text", err)
		}
		return nil
	}
}

// DecodeSummarizeTextResponse returns a decoder for responses returned by the
// assistant service summarize_text JSON-RPC method. restoreBody controls
// whether the response body should be restored after having been read.
func DecodeSummarizeTextResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "summarize_text", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "summarize_text", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "summarize_text", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body SummarizeTextResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "summarize_text", err)
		}
		res := NewSummarizeTextResultOK(&body)
		return res, nil
	}
}

// BuildSearchRequest instantiates a HTTP request object with method and path
// set to call the "assistant" service "search" endpoint
func (c *Client) BuildSearchRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: SearchAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "search", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeSearchRequest returns an encoder for requests sent to the assistant
// search server.
func EncodeSearchRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.SearchPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "search", "*assistant.SearchPayload", v)
		}
		b := NewSearchRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "search",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "search", err)
		}
		return nil
	}
}

// DecodeSearchResponse returns a decoder for responses returned by the
// assistant service search JSON-RPC method. restoreBody controls whether the
// response body should be restored after having been read.
func DecodeSearchResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "search", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "search", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "search", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body SearchResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "search", err)
		}
		res := NewSearchResultOK(&body)
		return res, nil
	}
}

// BuildExecuteCodeRequest instantiates a HTTP request object with method and
// path set to call the "assistant" service "execute_code" endpoint
func (c *Client) BuildExecuteCodeRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ExecuteCodeAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "execute_code", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeExecuteCodeRequest returns an encoder for requests sent to the
// assistant execute_code server.
func EncodeExecuteCodeRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.ExecuteCodePayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "execute_code", "*assistant.ExecuteCodePayload", v)
		}
		b := NewExecuteCodeRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "execute_code",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "execute_code", err)
		}
		return nil
	}
}

// DecodeExecuteCodeResponse returns a decoder for responses returned by the
// assistant service execute_code JSON-RPC method. restoreBody controls whether
// the response body should be restored after having been read.
func DecodeExecuteCodeResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "execute_code", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "execute_code", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "execute_code", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body ExecuteCodeResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "execute_code", err)
		}
		res := NewExecuteCodeResultOK(&body)
		return res, nil
	}
}

// BuildProcessBatchRequest instantiates a HTTP request object with method and
// path set to call the "assistant" service "process_batch" endpoint
func (c *Client) BuildProcessBatchRequest(ctx context.Context, v any) (*http.Request, error) {
	u := &url.URL{Scheme: c.scheme, Host: c.host, Path: ProcessBatchAssistantPath()}
	req, err := http.NewRequest("POST", u.String(), nil)
	if err != nil {
		return nil, goahttp.ErrInvalidURL("assistant", "process_batch", u.String(), err)
	}
	if ctx != nil {
		req = req.WithContext(ctx)
	}

	return req, nil
}

// EncodeProcessBatchRequest returns an encoder for requests sent to the
// assistant process_batch server.
func EncodeProcessBatchRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		p, ok := v.(*assistant.ProcessBatchPayload)
		if !ok {
			return goahttp.ErrInvalidType("assistant", "process_batch", "*assistant.ProcessBatchPayload", v)
		}
		b := NewProcessBatchRequestBody(p)
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "process_batch",
			Params:  b,
		}
		// No ID field in payload - always send as a request with generated ID
		id := uuid.New().String()
		body.ID = id
		if err := encoder(req).Encode(&body); err != nil {
			return goahttp.ErrEncodingError("assistant", "process_batch", err)
		}
		return nil
	}
}

// DecodeProcessBatchResponse returns a decoder for responses returned by the
// assistant service process_batch JSON-RPC method. restoreBody controls
// whether the response body should be restored after having been read.
func DecodeProcessBatchResponse(decoder func(*http.Response) goahttp.Decoder, restoreBody bool) func(*http.Response) (any, error) {
	return func(resp *http.Response) (any, error) {
		if restoreBody {
			b, err := io.ReadAll(resp.Body)
			if err != nil {
				return nil, err
			}
			resp.Body = io.NopCloser(bytes.NewBuffer(b))
			defer func() {
				resp.Body = io.NopCloser(bytes.NewBuffer(b))
			}()
		}
		defer resp.Body.Close()

		if resp.StatusCode != http.StatusOK {
			body, _ := io.ReadAll(resp.Body)
			return nil, goahttp.ErrInvalidResponse("assistant", "process_batch", resp.StatusCode, string(body))
		}

		var jresp jsonrpc.RawResponse
		if err := decoder(resp).Decode(&jresp); err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "process_batch", err)
		}

		if jresp.Error != nil {
			switch jresp.Error.Code {
			default:
				body, _ := io.ReadAll(resp.Body)
				return nil, goahttp.ErrInvalidResponse("assistant", "process_batch", resp.StatusCode, string(body))
			}
		}
		resp.Body = io.NopCloser(bytes.NewBuffer(jresp.Result))
		var (
			body ProcessBatchResponseBody
			err  error
		)
		err = decoder(resp).Decode(&body)
		if err != nil {
			return nil, goahttp.ErrDecodingError("assistant", "process_batch", err)
		}
		res := NewProcessBatchResultOK(&body)
		return res, nil
	}
}

// EncodeListDocumentsRequest returns an encoder for requests sent to the
// assistant service list_documents JSON-RPC method.
func EncodeListDocumentsRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		// For JSON-RPC methods without payloads, we still need to send the method envelope
		// Generate a unique ID for the request
		id := uuid.New().String()
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "list_documents",
			ID:      id,
		}
		if err := encoder(req).Encode(body); err != nil {
			return goahttp.ErrEncodingError("assistant", "list_documents", err)
		}
		return nil
	}
} // EncodeSystemInfoRequest returns an encoder for requests sent to the
// assistant service system_info JSON-RPC method.
func EncodeSystemInfoRequest(encoder func(*http.Request) goahttp.Encoder) func(*http.Request, any) error {
	return func(req *http.Request, v any) error {
		// For JSON-RPC methods without payloads, we still need to send the method envelope
		// Generate a unique ID for the request
		id := uuid.New().String()
		body := &jsonrpc.Request{
			JSONRPC: "2.0",
			Method:  "system_info",
			ID:      id,
		}
		if err := encoder(req).Encode(body); err != nil {
			return goahttp.ErrEncodingError("assistant", "system_info", err)
		}
		return nil
	}
}
