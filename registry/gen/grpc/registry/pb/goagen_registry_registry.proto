// Code generated with goa v3.23.4, DO NOT EDIT.
//
// registry protocol buffer definition
//
// Command:
// $ goa gen goa.design/goa-ai/registry/design -o registry

syntax = "proto3";

package goa_ai_registry;

option go_package = "/goa_ai_registrypb";

// Internal tool registry gateway for toolset discovery and tool invocation
service Registry {
	// Register a toolset with the registry
	rpc Register (RegisterRequest) returns (RegisterResponse);
	// Unregister a toolset from the registry
	rpc Unregister (UnregisterRequest) returns (UnregisterResponse);
	// Respond to a health check ping
	rpc Pong (PongRequest) returns (PongResponse);
	// List all registered toolsets with optional tag filtering
	rpc ListToolsets (ListToolsetsRequest) returns (ListToolsetsResponse);
	// Get a specific toolset by name including all tool schemas
	rpc GetToolset (GetToolsetRequest) returns (GetToolsetResponse);
	// Search toolsets by keyword matching name, description, or tags
	rpc Search (SearchRequest) returns (SearchResponse);
	// Initiate a tool call by publishing a tool call message to the toolset
// request stream and returning the tool use identifier and result stream
// identifier.
	rpc CallTool (CallToolRequest) returns (CallToolResponse);
}

message RegisterRequest {
	// Unique name for the toolset
	string name = 1;
	// Human-readable description of the toolset
	optional string description = 2;
	// Semantic version of the toolset.
	optional string version = 3;
	// Tags for categorization and filtering
	repeated string tags = 4;
	// Tool definitions with their schemas
	repeated ToolSchema tools = 5;
}
// Tool schema declaration for registration with the tool registry gateway.
message ToolSchema {
	// Globally unique tool identifier of the form "toolset.tool".
	string name = 1;
	// Human-readable description of what the tool does.
	optional string description = 2;
	// Optional tags used for policy, routing, or UI filtering.
	repeated string tags = 3;
	// Canonical JSON schema for the tool payload.
	bytes payload_schema = 4;
	// Canonical JSON schema for the tool result.
	bytes result_schema = 5;
	// Canonical JSON schema for the tool sidecar (UI-only), when present.
	optional bytes sidecar_schema = 6;
}

message RegisterResponse {
	// Pulse stream identifier for receiving tool requests
	string stream_id = 1;
	// ISO 8601 timestamp of registration
	string registered_at = 2;
}

message UnregisterRequest {
	// Name of the toolset to unregister
	string name = 1;
}

message UnregisterResponse {
}

message PongRequest {
	// ID of the ping being acknowledged
	string ping_id = 1;
	// Name of the toolset responding
	string toolset = 2;
}

message PongResponse {
}

message ListToolsetsRequest {
	// Filter by tags (all must match)
	repeated string tags = 1;
}

message ListToolsetsResponse {
	// List of registered toolsets
	repeated ToolsetInfo toolsets = 1;
}
// Toolset metadata for listing and search results
message ToolsetInfo {
	// Unique name for the toolset
	string name = 1;
	// Human-readable description
	optional string description = 2;
	// Semantic version of the toolset.
	optional string version = 3;
	// Tags for categorization
	repeated string tags = 4;
	// Number of tools in the toolset
	sint32 tool_count = 5;
	// ISO 8601 registration timestamp
	string registered_at = 6;
}

message GetToolsetRequest {
	// Name of the toolset to retrieve
	string name = 1;
}

message GetToolsetResponse {
	// Unique name for the toolset
	string name = 1;
	// Human-readable description
	optional string description = 2;
	// Semantic version of the toolset.
	optional string version = 3;
	// Tags for categorization
	repeated string tags = 4;
	// Tool schemas included in the toolset.
	repeated ToolSchema tools = 5;
	// Pulse stream identifier
	string stream_id = 6;
	// ISO 8601 registration timestamp
	string registered_at = 7;
}

message SearchRequest {
	// Search query string
	string query = 1;
}

message SearchResponse {
	// Matching toolsets
	repeated ToolsetInfo toolsets = 1;
}

message CallToolRequest {
	// Toolset registration identifier used for routing (for example,
// "atlas_data.atlas.read").
	string toolset = 1;
	// Globally unique tool identifier of the form "toolset.tool" (for example,
// "atlas.read.get_time_series").
	string tool = 2;
	// Canonical JSON payload for the tool call. Must validate against the
// registered payload schema.
	bytes payload_json = 3;
	// Execution metadata propagated alongside the tool call.
	ToolCallMeta meta = 4;
}
// Context metadata propagated alongside tool calls for routing, correlation,
// and domain injection (for example, session-scoped data access).
message ToolCallMeta {
	// Run identifier for the agent execution that issued this tool call.
	string run_id = 1;
	// Chat session identifier used to scope tool behavior and persistence.
	string session_id = 2;
	// Turn identifier within the session.
	optional string turn_id = 3;
	// Tool call identifier used for correlation with model provider tool calls.
	optional string tool_call_id = 4;
	// Parent tool call identifier when the tool call is nested.
	optional string parent_tool_call_id = 5;
}

message CallToolResponse {
	// Unique identifier for this invocation
	string tool_use_id = 1;
	// Pulse stream identifier that will receive the tool result message.
	string result_stream_id = 2;
}
