// Code generated by goa v3.23.4, DO NOT EDIT.
//
// registry gRPC server
//
// Command:
// $ goa gen goa.design/goa-ai/registry/design -o registry

package server

import (
	"context"
	"errors"

	registrypb "goa.design/goa-ai/registry/gen/grpc/registry/pb"
	registry "goa.design/goa-ai/registry/gen/registry"
	goagrpc "goa.design/goa/v3/grpc"
	goa "goa.design/goa/v3/pkg"
	"google.golang.org/grpc/codes"
)

// Server implements the registrypb.RegistryServer interface.
type Server struct {
	RegisterH     goagrpc.UnaryHandler
	UnregisterH   goagrpc.UnaryHandler
	PongH         goagrpc.UnaryHandler
	ListToolsetsH goagrpc.UnaryHandler
	GetToolsetH   goagrpc.UnaryHandler
	SearchH       goagrpc.UnaryHandler
	CallToolH     goagrpc.UnaryHandler
	registrypb.UnimplementedRegistryServer
}

// New instantiates the server struct with the registry service endpoints.
func New(e *registry.Endpoints, uh goagrpc.UnaryHandler) *Server {
	return &Server{
		RegisterH:     NewRegisterHandler(e.Register, uh),
		UnregisterH:   NewUnregisterHandler(e.Unregister, uh),
		PongH:         NewPongHandler(e.Pong, uh),
		ListToolsetsH: NewListToolsetsHandler(e.ListToolsets, uh),
		GetToolsetH:   NewGetToolsetHandler(e.GetToolset, uh),
		SearchH:       NewSearchHandler(e.Search, uh),
		CallToolH:     NewCallToolHandler(e.CallTool, uh),
	}
}

// NewRegisterHandler creates a gRPC handler which serves the "registry"
// service "Register" endpoint.
func NewRegisterHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeRegisterRequest, EncodeRegisterResponse)
	}
	return h
}

// Register implements the "Register" method in registrypb.RegistryServer
// interface.
func (s *Server) Register(ctx context.Context, message *registrypb.RegisterRequest) (*registrypb.RegisterResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "Register")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.RegisterH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.RegisterResponse), nil
}

// NewUnregisterHandler creates a gRPC handler which serves the "registry"
// service "Unregister" endpoint.
func NewUnregisterHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeUnregisterRequest, EncodeUnregisterResponse)
	}
	return h
}

// Unregister implements the "Unregister" method in registrypb.RegistryServer
// interface.
func (s *Server) Unregister(ctx context.Context, message *registrypb.UnregisterRequest) (*registrypb.UnregisterResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "Unregister")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.UnregisterH.Handle(ctx, message)
	if err != nil {
		var en goa.GoaErrorNamer
		if errors.As(err, &en) {
			switch en.GoaErrorName() {
			case "not_found":
				return nil, goagrpc.NewStatusError(codes.NotFound, err, goagrpc.NewErrorResponse(err))
			}
		}
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.UnregisterResponse), nil
}

// NewPongHandler creates a gRPC handler which serves the "registry" service
// "Pong" endpoint.
func NewPongHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodePongRequest, EncodePongResponse)
	}
	return h
}

// Pong implements the "Pong" method in registrypb.RegistryServer interface.
func (s *Server) Pong(ctx context.Context, message *registrypb.PongRequest) (*registrypb.PongResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "Pong")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.PongH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.PongResponse), nil
}

// NewListToolsetsHandler creates a gRPC handler which serves the "registry"
// service "ListToolsets" endpoint.
func NewListToolsetsHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeListToolsetsRequest, EncodeListToolsetsResponse)
	}
	return h
}

// ListToolsets implements the "ListToolsets" method in
// registrypb.RegistryServer interface.
func (s *Server) ListToolsets(ctx context.Context, message *registrypb.ListToolsetsRequest) (*registrypb.ListToolsetsResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "ListToolsets")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.ListToolsetsH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.ListToolsetsResponse), nil
}

// NewGetToolsetHandler creates a gRPC handler which serves the "registry"
// service "GetToolset" endpoint.
func NewGetToolsetHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeGetToolsetRequest, EncodeGetToolsetResponse)
	}
	return h
}

// GetToolset implements the "GetToolset" method in registrypb.RegistryServer
// interface.
func (s *Server) GetToolset(ctx context.Context, message *registrypb.GetToolsetRequest) (*registrypb.GetToolsetResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "GetToolset")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.GetToolsetH.Handle(ctx, message)
	if err != nil {
		var en goa.GoaErrorNamer
		if errors.As(err, &en) {
			switch en.GoaErrorName() {
			case "not_found":
				return nil, goagrpc.NewStatusError(codes.NotFound, err, goagrpc.NewErrorResponse(err))
			}
		}
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.GetToolsetResponse), nil
}

// NewSearchHandler creates a gRPC handler which serves the "registry" service
// "Search" endpoint.
func NewSearchHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeSearchRequest, EncodeSearchResponse)
	}
	return h
}

// Search implements the "Search" method in registrypb.RegistryServer interface.
func (s *Server) Search(ctx context.Context, message *registrypb.SearchRequest) (*registrypb.SearchResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "Search")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.SearchH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.SearchResponse), nil
}

// NewCallToolHandler creates a gRPC handler which serves the "registry"
// service "CallTool" endpoint.
func NewCallToolHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeCallToolRequest, EncodeCallToolResponse)
	}
	return h
}

// CallTool implements the "CallTool" method in registrypb.RegistryServer
// interface.
func (s *Server) CallTool(ctx context.Context, message *registrypb.CallToolRequest) (*registrypb.CallToolResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "CallTool")
	ctx = context.WithValue(ctx, goa.ServiceKey, "registry")
	resp, err := s.CallToolH.Handle(ctx, message)
	if err != nil {
		var en goa.GoaErrorNamer
		if errors.As(err, &en) {
			switch en.GoaErrorName() {
			case "not_found":
				return nil, goagrpc.NewStatusError(codes.NotFound, err, goagrpc.NewErrorResponse(err))
			case "validation_error":
				return nil, goagrpc.NewStatusError(codes.InvalidArgument, err, goagrpc.NewErrorResponse(err))
			case "service_unavailable":
				return nil, goagrpc.NewStatusError(codes.Unavailable, err, goagrpc.NewErrorResponse(err))
			}
		}
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*registrypb.CallToolResponse), nil
}
