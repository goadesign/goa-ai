// Code generated by goa v3.23.4, DO NOT EDIT.
//
// registry service
//
// Command:
// $ goa gen goa.design/goa-ai/registry/design -o registry

package registry

import (
	"context"

	goa "goa.design/goa/v3/pkg"
)

// Internal tool registry gateway for toolset discovery and tool invocation
type Service interface {
	// Register a toolset with the registry
	Register(context.Context, *RegisterPayload) (res *RegisterResult, err error)
	// Unregister a toolset from the registry
	Unregister(context.Context, *UnregisterPayload) (err error)
	// Respond to a health check ping
	Pong(context.Context, *PongPayload) (err error)
	// List all registered toolsets with optional tag filtering
	ListToolsets(context.Context, *ListToolsetsPayload) (res *ListToolsetsResult, err error)
	// Get a specific toolset by name including all tool schemas
	GetToolset(context.Context, *GetToolsetPayload) (res *Toolset, err error)
	// Search toolsets by keyword matching name, description, or tags
	Search(context.Context, *SearchPayload) (res *SearchResult, err error)
	// Initiate a tool call by publishing a tool call message to the toolset
	// request stream and returning the tool use identifier and result stream
	// identifier.
	CallTool(context.Context, *CallToolPayload) (res *CallToolResult, err error)
}

// APIName is the name of the API as defined in the design.
const APIName = "registry"

// APIVersion is the version of the API as defined in the design.
const APIVersion = "1.0"

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "registry"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [7]string{"Register", "Unregister", "Pong", "ListToolsets", "GetToolset", "Search", "CallTool"}

// CallToolPayload is the payload type of the registry service CallTool method.
type CallToolPayload struct {
	// Toolset registration identifier used for routing (for example,
	// "atlas_data.atlas.read").
	Toolset string
	// Globally unique tool identifier of the form "toolset.tool" (for example,
	// "atlas.read.get_time_series").
	Tool string
	// Canonical JSON payload for the tool call. Must validate against the
	// registered payload schema.
	PayloadJSON []byte
	// Execution metadata propagated alongside the tool call.
	Meta *ToolCallMeta
}

// CallToolResult is the result type of the registry service CallTool method.
type CallToolResult struct {
	// Unique identifier for this invocation
	ToolUseID string
	// Pulse stream identifier that will receive the tool result message.
	ResultStreamID string
}

// GetToolsetPayload is the payload type of the registry service GetToolset
// method.
type GetToolsetPayload struct {
	// Name of the toolset to retrieve
	Name string
}

// ListToolsetsPayload is the payload type of the registry service ListToolsets
// method.
type ListToolsetsPayload struct {
	// Filter by tags (all must match)
	Tags []string
}

// ListToolsetsResult is the result type of the registry service ListToolsets
// method.
type ListToolsetsResult struct {
	// List of registered toolsets
	Toolsets []*ToolsetInfo
}

// PongPayload is the payload type of the registry service Pong method.
type PongPayload struct {
	// ID of the ping being acknowledged
	PingID string
	// Name of the toolset responding
	Toolset string
}

// RegisterPayload is the payload type of the registry service Register method.
type RegisterPayload struct {
	// Unique name for the toolset
	Name string
	// Human-readable description of the toolset
	Description *string
	// Semantic version of the toolset.
	Version *SemVer
	// Tags for categorization and filtering
	Tags []string
	// Tool definitions with their schemas
	Tools []*ToolSchema
}

// RegisterResult is the result type of the registry service Register method.
type RegisterResult struct {
	// Pulse stream identifier for receiving tool requests
	StreamID string
	// ISO 8601 timestamp of registration
	RegisteredAt string
}

// SearchPayload is the payload type of the registry service Search method.
type SearchPayload struct {
	// Search query string
	Query string
}

// SearchResult is the result type of the registry service Search method.
type SearchResult struct {
	// Matching toolsets
	Toolsets []*ToolsetInfo
}

// Semantic version string (for example, "1.0.0" or "v1.0.0").
type SemVer string

// Context metadata propagated alongside tool calls for routing, correlation,
// and domain injection (for example, session-scoped data access).
type ToolCallMeta struct {
	// Run identifier for the agent execution that issued this tool call.
	RunID string
	// Chat session identifier used to scope tool behavior and persistence.
	SessionID string
	// Turn identifier within the session.
	TurnID *string
	// Tool call identifier used for correlation with model provider tool calls.
	ToolCallID *string
	// Parent tool call identifier when the tool call is nested.
	ParentToolCallID *string
}

// Tool schema declaration for registration with the tool registry gateway.
type ToolSchema struct {
	// Globally unique tool identifier of the form "toolset.tool".
	Name string
	// Human-readable description of what the tool does.
	Description *string
	// Optional tags used for policy, routing, or UI filtering.
	Tags []string
	// Canonical JSON schema for the tool payload.
	PayloadSchema []byte
	// Canonical JSON schema for the tool result.
	ResultSchema []byte
	// Canonical JSON schema for the tool sidecar (UI-only), when present.
	SidecarSchema []byte
}

// Toolset is the result type of the registry service GetToolset method.
type Toolset struct {
	// Unique name for the toolset
	Name string
	// Human-readable description
	Description *string
	// Semantic version of the toolset.
	Version *SemVer
	// Tags for categorization
	Tags []string
	// Tool schemas included in the toolset.
	Tools []*ToolSchema
	// Pulse stream identifier
	StreamID string
	// ISO 8601 registration timestamp
	RegisteredAt string
}

// Toolset metadata for listing and search results
type ToolsetInfo struct {
	// Unique name for the toolset
	Name string
	// Human-readable description
	Description *string
	// Semantic version of the toolset.
	Version *SemVer
	// Tags for categorization
	Tags []string
	// Number of tools in the toolset
	ToolCount int
	// ISO 8601 registration timestamp
	RegisteredAt string
}

// UnregisterPayload is the payload type of the registry service Unregister
// method.
type UnregisterPayload struct {
	// Name of the toolset to unregister
	Name string
}

// MakeNotFound builds a goa.ServiceError from an error.
func MakeNotFound(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "not_found", false, false, false)
}

// MakeValidationError builds a goa.ServiceError from an error.
func MakeValidationError(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "validation_error", false, false, false)
}

// MakeServiceUnavailable builds a goa.ServiceError from an error.
func MakeServiceUnavailable(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "service_unavailable", false, false, false)
}
