// Code generated by goa v3.24.0, DO NOT EDIT.
//
// ChatAgent implementation
//
// Command:
// $ goa gen example.com/quickstart/design

package chat

import (
	agent "goa.design/goa-ai/runtime/agent"
	"goa.design/goa-ai/runtime/agent/planner"
	runtime "goa.design/goa-ai/runtime/agent/runtime"
)

// AgentID is the fully-qualified identifier for this agent.
const AgentID agent.Ident = "orchestrator.chat"

// Workflow and activity identifiers for this agent.
const (
	// WorkflowName is the fully-qualified workflow identifier registered with the engine.
	WorkflowName = "orchestrator.chat.workflow"
	// DefaultTaskQueue is the engine queue this agent polls for workflow and activity tasks.
	DefaultTaskQueue = "orchestrator_chat_workflow"
	// PlanActivity is the activity name that runs the initial planning turn.
	PlanActivity = "orchestrator.chat.plan"
	// ResumeActivity is the activity name that runs the resume turn after tool execution.
	ResumeActivity = "orchestrator.chat.resume"
	// ExecuteToolActivity is the activity name used to execute tools via the engine.
	ExecuteToolActivity = "orchestrator.chat.executetool"
)

// ChatAgent wraps the planner implementation for agent "chat".
type ChatAgent struct {
	Planner planner.Planner
}

// NewChatAgent validates the configuration and constructs a ChatAgent.
func NewChatAgent(cfg ChatAgentConfig) (*ChatAgent, error) {
	if err := cfg.Validate(); err != nil {
		return nil, err
	}
	return &ChatAgent{Planner: cfg.Planner}, nil
}

// NewWorker returns a per-agent worker configuration. Engines that support
// workers (e.g., Temporal) use this to bind the agent's workflow and activities
// to a specific queue. Supplying no options uses the generated default queue.
func NewWorker(opts ...runtime.WorkerOption) runtime.WorkerConfig {
	var cfg runtime.WorkerConfig
	for _, o := range opts {
		if o != nil {
			o(&cfg)
		}
	}
	return cfg
}

// Route returns the minimal route required to construct a client in a
// caller process without registering the agent locally.
func Route() runtime.AgentRoute {
	return runtime.AgentRoute{
		ID:               AgentID,
		WorkflowName:     WorkflowName,
		DefaultTaskQueue: "orchestrator_chat_workflow",
	}
}

// NewClient returns a runtime.AgentClient bound to this agent. In caller
// processes that do not register the agent locally, this uses ClientMeta to
// construct a client that can start workflows against remote workers.
func NewClient(rt *runtime.Runtime) runtime.AgentClient {
	return rt.MustClientFor(Route())
}
